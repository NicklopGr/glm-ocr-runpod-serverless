# H100 80GB preset
# Full layout mode (PP-DocLayoutV3) + JSON+Markdown output.

# RunPod handler concurrency
WORKER_MAX_CONCURRENCY=3
DOWNLOAD_CONCURRENCY=32
MAX_PAGES_PER_JOB=192

# Input normalization
IMAGE_MAX_SIDE=2600
IMAGE_JPEG_QUALITY=92

# Handler response controls
RETURN_CROP_IMAGES_DEFAULT=false
MAX_CROP_IMAGES=300
GLMOCR_PARSE_TIMEOUT_SECONDS=1800
GLMOCR_LOG_LEVEL=INFO

# vLLM model serving
MODEL_NAME=zai-org/GLM-OCR
MODEL_REVISION=e9134f400acad80346162536e043def285fa1022
SERVED_MODEL_NAME=glm-ocr
VLLM_HOST=0.0.0.0
VLLM_PORT=8080
VLLM_DTYPE=bfloat16
GPU_MEMORY_UTILIZATION=0.94
MAX_MODEL_LEN=32768
MAX_NUM_SEQS=192
MAX_NUM_BATCHED_TOKENS=65536
LIMIT_MM_PER_PROMPT=
SPECULATIVE_CONFIG=
VLLM_HEALTH_TIMEOUT=420

# GLM-OCR pipeline (official full layout style)
GLMOCR_CONFIG_PATH=/app/glmocr.config.yaml
GLMOCR_ENABLE_LAYOUT=true
GLMOCR_OUTPUT_FORMAT=both
GLMOCR_MAX_WORKERS=32
GLMOCR_CONNECTION_POOL_SIZE=256
GLMOCR_PAGE_MAXSIZE=220
GLMOCR_REGION_MAXSIZE=1500
GLMOCR_MAX_TOKENS_PER_PAGE=6144
GLMOCR_TEMPERATURE=0.01
GLMOCR_TOP_P=0.9
GLMOCR_DEFAULT_PROMPT=Recognize all text, formulas, and tables in the document.
GLMOCR_CONNECT_TIMEOUT=30
GLMOCR_REQUEST_TIMEOUT=180
GLMOCR_RETRY_MAX_ATTEMPTS=3
GLMOCR_RETRY_BACKOFF_BASE_SECONDS=0.5

# Layout detector
GLMOCR_LAYOUT_MODEL_DIR=PaddlePaddle/PP-DocLayoutV3_safetensors
GLMOCR_LAYOUT_THRESHOLD=0.3
GLMOCR_LAYOUT_BATCH_SIZE=1
GLMOCR_LAYOUT_WORKERS=1
GLMOCR_LAYOUT_CUDA_VISIBLE_DEVICES=0
